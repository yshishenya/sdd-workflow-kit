# Codex environment config (seeded)
# Customize freely. This file is created once if missing.

version = 1
name = "{{project_name}}"

[setup]
script = '''
set -euo pipefail

# Codex typically runs setup inside the worktree, but $wt is not always defined.
wt_dir="${wt:-$PWD}"
cd "$wt_dir"

# Optional: add repo-specific setup here (env vars, local deps, etc).
'''

[[actions]]
name = "sdd-kit: sync"
icon = "refresh"
command = "cd \"${wt:-$PWD}\" && python3 .tooling/sdd-workflow-kit/bin/sdd-kit sync --project ."

[[actions]]
name = "sdd-kit: check (drift gate)"
icon = "test"
command = "cd \"${wt:-$PWD}\" && python3 .tooling/sdd-workflow-kit/bin/sdd-kit check --project ."

[[actions]]
name = "format"
icon = "code"
command = "cd \"${wt:-$PWD}\" && {{format_cmd}}"

[[actions]]
name = "lint"
icon = "code"
command = "cd \"${wt:-$PWD}\" && {{lint_cmd}}"

[[actions]]
name = "test"
icon = "test"
command = "cd \"${wt:-$PWD}\" && {{test_cmd}}"

