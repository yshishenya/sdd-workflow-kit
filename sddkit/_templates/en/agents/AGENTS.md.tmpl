# Agent Instructions (managed)

This repository uses **Spec-Driven Development (SDD)** and a shared toolchain.

## Project Summary

- Detected languages: `{{languages}}`
- Package managers: `{{package_managers}}`
- sdd-workflow-kit version: `{{kit_version}}`

## Communication Language

- Keep this `AGENTS.md` file in English.
- For user-facing communication, use the configured locale from `.sddkit/config.toml` (`[sddkit].locale` = `{{configured_locale}}`).

## Workflow (SDD)

- Write or update specs first (no coding before intent is captured).
- Keep architecture and feature docs executable (verification steps must be real commands).
- Prefer small, atomic tasks that touch one file at a time.

## Common Commands (best-effort)

- Install: `{{install_cmd}}`
- Test: `{{test_cmd}}`
- Lint: `{{lint_cmd}}`
- Format: `{{format_cmd}}`

## Dependencies (Freshness Policy)

- Before adding/updating a dependency, verify the latest stable version and compatibility with this repo.
- Prefer latest stable compatible versions by default.
- If an older version is required, record the reason in the spec/work item and PR.
- If usage is unclear, consult official online docs/changelogs first and follow primary-source guidance.

## Version Pinning Policy

- For server-side module/tool updates, always pin an explicit version (release tag or commit SHA).
- Do not use floating refs in production/server configs (`latest`, `main`, wildcard ranges).
- Every update PR must document: previous version, new version, rollback steps.

## Git Workflow Principles

- Before starting any implementation, create a dedicated branch and switch to it.
- Branch name must reflect the work scope (for example: `feature/<short-slug>`, `fix/<short-slug>`, `chore/<short-slug>`).
- Use one branch per logical change.
- Keep commits atomic and scoped to one purpose.
- Rebase/sync with the integration branch before merge.
- Never force-push to protected/shared branches.

## Commit Message Standard

- Use Conventional Commits: `type(scope): summary`.
- Write summary in imperative mood and keep it concise.
- In commit body, explain why, what changed, and impact/risk.
- Reference issue/spec/work item when relevant.

## Pull Request Standard

- Include: context/problem, solution summary, validation steps, and risks/rollback.
- Keep PR scope focused (no unrelated changes).
- Attach screenshots/logs/examples for UX/API changes when helpful.
- Ensure CI and required checks pass before requesting review.

## Handling PR Review Comments

- Respond to every substantive comment.
- For fixes: push code changes and reply with a short resolution note.
- For disagreements: provide rationale and propose an alternative.
- Resolve comment threads only after the issue is addressed or reviewer alignment is reached.

## Skills

Skills live under `{{codex_home}}/skills` (global) or `.codex/skills` (project-local).

Install skills from this kit:

- Global: `python3 {{kit_path}}/bin/sdd-kit install-skills --project . --to global`
- Project: `python3 {{kit_path}}/bin/sdd-kit install-skills --project . --to project`

### Available skills
{{skills_block}}

## Local overrides (safe)

Do not edit managed files directly. Put repo-specific notes into:

- `.sddkit/fragments/AGENTS.append.md`
